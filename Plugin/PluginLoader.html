<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=US-ASCII">
<title>Class template PluginLoader</title>
<link rel="stylesheet" href="../boostbook.css" type="text/css">
<meta name="generator" content="DocBook XSL Stylesheets V1.76.1">
<link rel="home" href="../index.html" title="Chapter&#160;1.&#160;Plugin 0.0.2.2">
<link rel="up" href="../plugin/reference.html#header.Plugin.PluginLoader_h" title="Header &lt;Plugin/PluginLoader.h&gt;">
<link rel="prev" href="../PLUGIN_FACTORY_DEFINITION.html" title="Macro PLUGIN_FACTORY_DEFINITION">
</head>
<body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF">
<div class="spirit-nav">
<a accesskey="p" href="../PLUGIN_FACTORY_DEFINITION.html"><img src="../images/prev.png" alt="Prev"></a><a accesskey="u" href="../plugin/reference.html#header.Plugin.PluginLoader_h"><img src="../images/up.png" alt="Up"></a><a accesskey="h" href="../index.html"><img src="../images/home.png" alt="Home"></a>
</div>
<div class="refentry">
<a name="Plugin.PluginLoader"></a><div class="titlepage"></div>
<div class="refnamediv">
<h2><span class="refentrytitle">Class template PluginLoader</span></h2>
<p>Plugin::PluginLoader &#8212; Loader of a concrete plugin. </p>
</div>
<h2 xmlns:rev="http://www.cs.rpi.edu/~gregod/boost/tools/doc/revision" class="refsynopsisdiv-title">Synopsis</h2>
<div xmlns:rev="http://www.cs.rpi.edu/~gregod/boost/tools/doc/revision" class="refsynopsisdiv"><pre class="synopsis"><span class="comment">// In header: &lt;<a class="link" href="../plugin/reference.html#header.Plugin.PluginLoader_h" title="Header &lt;Plugin/PluginLoader.h&gt;">Plugin/PluginLoader.h</a>&gt;

</span><span class="keyword">template</span><span class="special">&lt;</span><span class="keyword">typename</span> T<span class="special">&gt;</span> 
<span class="keyword">class</span> <a class="link" href="PluginLoader.html" title="Class template PluginLoader">PluginLoader</a> <span class="special">:</span> <span class="keyword">private</span> <span class="identifier">boost</span><span class="special">::</span><span class="identifier">noncopyable</span> <span class="special">{</span>
<span class="keyword">public</span><span class="special">:</span>
  <span class="comment">// <a class="link" href="PluginLoader.html#Plugin.PluginLoaderconstruct-copy-destruct">construct/copy/destruct</a></span>
  <a class="link" href="PluginLoader.html#idm15024-bb"><span class="identifier">PluginLoader</span></a><span class="special">(</span><span class="keyword">const</span> <span class="identifier">std</span><span class="special">::</span><span class="identifier">string</span> <span class="special">&amp;</span><span class="special">)</span><span class="special">;</span>
  <a class="link" href="PluginLoader.html#idm12704-bb"><span class="special">~</span><span class="identifier">PluginLoader</span></a><span class="special">(</span><span class="special">)</span><span class="special">;</span>

  <span class="comment">// <a class="link" href="PluginLoader.html#idm26576-bb">public member functions</a></span>
  <span class="keyword">bool</span> <a class="link" href="PluginLoader.html#idm26176-bb"><span class="identifier">load</span></a><span class="special">(</span><span class="special">)</span><span class="special">;</span>
  <span class="keyword">bool</span> <a class="link" href="PluginLoader.html#idm24000-bb"><span class="identifier">unload</span></a><span class="special">(</span><span class="special">)</span><span class="special">;</span>
  <span class="keyword">bool</span> <a class="link" href="PluginLoader.html#idm21808-bb"><span class="identifier">isLoaded</span></a><span class="special">(</span><span class="special">)</span> <span class="keyword">const</span><span class="special">;</span>
  <span class="identifier">T</span> <span class="special">*</span> <a class="link" href="PluginLoader.html#idm19744-bb"><span class="identifier">getPluginInterfaceInstance</span></a><span class="special">(</span><span class="special">)</span><span class="special">;</span>
  <span class="identifier">std</span><span class="special">::</span><span class="identifier">string</span> <a class="link" href="PluginLoader.html#idm17584-bb"><span class="identifier">getErrorMsg</span></a><span class="special">(</span><span class="special">)</span> <span class="keyword">const</span><span class="special">;</span>

  <span class="comment">// <a class="link" href="PluginLoader.html#idm11856-bb">private member functions</a></span>
  <span class="keyword">template</span><span class="special">&lt;</span><span class="keyword">typename</span> R<span class="special">&gt;</span> <span class="identifier">R</span> <a class="link" href="PluginLoader.html#idm11440-bb"><span class="identifier">callFunction</span></a><span class="special">(</span><span class="keyword">const</span> <span class="keyword">char</span> <span class="special">*</span><span class="special">)</span><span class="special">;</span>
  <span class="keyword">bool</span> <a class="link" href="PluginLoader.html#idm8944-bb"><span class="identifier">loadLibrary</span></a><span class="special">(</span><span class="special">)</span><span class="special">;</span>
  <span class="keyword">bool</span> <a class="link" href="PluginLoader.html#idm7984-bb"><span class="identifier">unloadLibrary</span></a><span class="special">(</span><span class="special">)</span><span class="special">;</span>
  <span class="identifier">generic_function_ptr</span> <a class="link" href="PluginLoader.html#idm7024-bb"><span class="identifier">getFunction</span></a><span class="special">(</span><span class="keyword">const</span> <span class="keyword">char</span> <span class="special">*</span><span class="special">)</span><span class="special">;</span>
  <span class="identifier">std</span><span class="special">::</span><span class="identifier">string</span> <a class="link" href="PluginLoader.html#idm5376-bb"><span class="identifier">getErrorMsgImpl</span></a><span class="special">(</span><span class="special">)</span> <span class="keyword">const</span><span class="special">;</span>
<span class="special">}</span><span class="special">;</span></pre></div>
<div class="refsect1">
<a name="idp5360432"></a><h2>Description</h2>
<p>
</p>
<div class="refsect2">
<a name="idp5361072"></a><h3>Template Parameters</h3>
<div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem">
<pre class="literallayout"><span class="keyword">typename</span> T</pre>
<p>Interface type of the concrete plugin </p>
</li></ol></div>
</div>
<div class="refsect2">
<a name="idp5363936"></a><h3>
<a name="Plugin.PluginLoaderconstruct-copy-destruct"></a><code class="computeroutput">PluginLoader</code> 
        public
       construct/copy/destruct</h3>
<div class="orderedlist"><ol class="orderedlist" type="1">
<li class="listitem">
<pre class="literallayout"><a name="idm15024-bb"></a><span class="identifier">PluginLoader</span><span class="special">(</span><span class="keyword">const</span> <span class="identifier">std</span><span class="special">::</span><span class="identifier">string</span> <span class="special">&amp;</span> name<span class="special">)</span><span class="special">;</span></pre>Constructor. <p>If you give only a filename without any directory information, it will look for a matching library in the current working directory and in directories included in the PATH environment variable. If you give an absolute path to a file, it will consider this name to be the plugin library. If you give a relative path to a file, path will be relative to the current working directory. 
</p>
<div class="variablelist"><table border="0">
<col align="left" valign="top">
<tbody><tr>
<td><p><span class="term">Parameters:</span></p></td>
<td><div class="variablelist"><table border="0">
<col align="left" valign="top">
<tbody><tr>
<td><p><span class="term"><code class="computeroutput">name</code></span></p></td>
<td><p>Filename of the concrete plugin </p></td>
</tr></tbody>
</table></div></td>
</tr></tbody>
</table></div>
</li>
<li class="listitem">
<pre class="literallayout"><a name="idm12704-bb"></a><span class="special">~</span><span class="identifier">PluginLoader</span><span class="special">(</span><span class="special">)</span><span class="special">;</span></pre>Destructor. <p>Unloads the plugin if necessary. </p>
</li>
</ol></div>
</div>
<div class="refsect2">
<a name="idp5379392"></a><h3>
<a name="idm26576-bb"></a><code class="computeroutput">PluginLoader</code> public member functions</h3>
<div class="orderedlist"><ol class="orderedlist" type="1">
<li class="listitem">
<pre class="literallayout"><span class="keyword">bool</span> <a name="idm26176-bb"></a><span class="identifier">load</span><span class="special">(</span><span class="special">)</span><span class="special">;</span></pre>Load the plugin. <p>This method only load the dynamic library in memory. It does not instantiate the plugin facade. 
</p>
<div class="variablelist"><table border="0">
<col align="left" valign="top">
<tbody><tr>
<td><p><span class="term">Returns:</span></p></td>
<td><p>True on success. False otherwise. </p></td>
</tr></tbody>
</table></div>
</li>
<li class="listitem">
<pre class="literallayout"><span class="keyword">bool</span> <a name="idm24000-bb"></a><span class="identifier">unload</span><span class="special">(</span><span class="special">)</span><span class="special">;</span></pre>Unload the plugin. <p>If the plugin facade is instanciated, it is destroyed. Then the dynamic library is unloaded from memory. 
</p>
<div class="variablelist"><table border="0">
<col align="left" valign="top">
<tbody><tr>
<td><p><span class="term">Returns:</span></p></td>
<td><p>True on success. False otherwise. </p></td>
</tr></tbody>
</table></div>
</li>
<li class="listitem">
<pre class="literallayout"><span class="keyword">bool</span> <a name="idm21808-bb"></a><span class="identifier">isLoaded</span><span class="special">(</span><span class="special">)</span> <span class="keyword">const</span><span class="special">;</span></pre>Check if the plugin is loaded. <p>
</p>
<div class="variablelist"><table border="0">
<col align="left" valign="top">
<tbody><tr>
<td><p><span class="term">Returns:</span></p></td>
<td><p>True if the plugin is loaded. False otherwise. </p></td>
</tr></tbody>
</table></div>
</li>
<li class="listitem">
<pre class="literallayout"><span class="identifier">T</span> <span class="special">*</span> <a name="idm19744-bb"></a><span class="identifier">getPluginInterfaceInstance</span><span class="special">(</span><span class="special">)</span><span class="special">;</span></pre>Get a pointer to the plugin interface. <p>Note that this method instanciate the plugin facade singleton if it is not already created. 
</p>
<div class="variablelist"><table border="0">
<col align="left" valign="top">
<tbody><tr>
<td><p><span class="term">Returns:</span></p></td>
<td><p>a valid pointer if the plugin is loaded. NULL otherwise. </p></td>
</tr></tbody>
</table></div>
</li>
<li class="listitem">
<pre class="literallayout"><span class="identifier">std</span><span class="special">::</span><span class="identifier">string</span> <a name="idm17584-bb"></a><span class="identifier">getErrorMsg</span><span class="special">(</span><span class="special">)</span> <span class="keyword">const</span><span class="special">;</span></pre>Get error message. <p>If any of the <code class="computeroutput"><a class="link" href="PluginLoader.html" title="Class template PluginLoader">PluginLoader</a></code> methods returns false. You can call this method to get an explanation of the error. Please note that the behavior of this method is OS specific. Some OS may return an empty error message. </p>
</li>
</ol></div>
</div>
<div class="refsect2">
<a name="idp5411840"></a><h3>
<a name="idm11856-bb"></a><code class="computeroutput">PluginLoader</code> private member functions</h3>
<div class="orderedlist"><ol class="orderedlist" type="1">
<li class="listitem"><pre class="literallayout"><span class="keyword">template</span><span class="special">&lt;</span><span class="keyword">typename</span> R<span class="special">&gt;</span> <span class="identifier">R</span> <a name="idm11440-bb"></a><span class="identifier">callFunction</span><span class="special">(</span><span class="keyword">const</span> <span class="keyword">char</span> <span class="special">*</span> function_name<span class="special">)</span><span class="special">;</span></pre></li>
<li class="listitem"><pre class="literallayout"><span class="keyword">bool</span> <a name="idm8944-bb"></a><span class="identifier">loadLibrary</span><span class="special">(</span><span class="special">)</span><span class="special">;</span></pre></li>
<li class="listitem"><pre class="literallayout"><span class="keyword">bool</span> <a name="idm7984-bb"></a><span class="identifier">unloadLibrary</span><span class="special">(</span><span class="special">)</span><span class="special">;</span></pre></li>
<li class="listitem"><pre class="literallayout"><span class="identifier">generic_function_ptr</span> <a name="idm7024-bb"></a><span class="identifier">getFunction</span><span class="special">(</span><span class="keyword">const</span> <span class="keyword">char</span> <span class="special">*</span> function_name<span class="special">)</span><span class="special">;</span></pre></li>
<li class="listitem"><pre class="literallayout"><span class="identifier">std</span><span class="special">::</span><span class="identifier">string</span> <a name="idm5376-bb"></a><span class="identifier">getErrorMsgImpl</span><span class="special">(</span><span class="special">)</span> <span class="keyword">const</span><span class="special">;</span></pre></li>
</ol></div>
</div>
</div>
</div>
<table xmlns:rev="http://www.cs.rpi.edu/~gregod/boost/tools/doc/revision" width="100%"><tr>
<td align="left"></td>
<td align="right"><div class="copyright-footer">Copyright &#169; 2012, 2013 J&#233;r&#233;my Coulon<p>
        Distributed under the Boost Software License, Version 1.0. (See accompanying
        file LICENSE_1_0.txt or copy at <a href="http://www.boost.org/LICENSE_1_0.txt" target="_top">http://www.boost.org/LICENSE_1_0.txt</a>)
      </p>
</div></td>
</tr></table>
<hr>
<div class="spirit-nav">
<a accesskey="p" href="../PLUGIN_FACTORY_DEFINITION.html"><img src="../images/prev.png" alt="Prev"></a><a accesskey="u" href="../plugin/reference.html#header.Plugin.PluginLoader_h"><img src="../images/up.png" alt="Up"></a><a accesskey="h" href="../index.html"><img src="../images/home.png" alt="Home"></a>
</div>
</body>
</html>
